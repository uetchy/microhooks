{"version":3,"file":"microhooks.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useState, useEffect, useRef } from 'react';\nimport load from 'load-asset';\n\nexport function useDeferredState<T>(\n  duration: number,\n  initialValue: T\n): [T, React.Dispatch<React.SetStateAction<T>>] {\n  const [response, setResponse] = useState<T>(initialValue);\n  const [innerValue, setInnerValue] = useState<T>(initialValue);\n\n  useEffect(() => {\n    const fn = setTimeout(() => {\n      setResponse(innerValue);\n    }, duration);\n\n    return () => {\n      clearTimeout(fn);\n    };\n  }, [duration, innerValue]);\n\n  return [response, setInnerValue];\n}\n\nexport function useTakeEffect(\n  fn: () => void | (() => void),\n  deps: React.DependencyList\n) {\n  useEffect(() => {\n    if (deps.some(d => d === undefined || d === null)) return;\n    const destructor = fn();\n    return () => {\n      destructor && destructor();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n}\n\ninterface Asset {\n  [key: string]: string;\n}\n\nexport function usePrefetch(assets: Asset[]): void {\n  useEffect((): void => {\n    load.all(assets);\n  }, [assets]);\n}\n\nexport interface Bounds {\n  width: number;\n  height: number;\n}\n\n/**\n * const {width, height} = useBounds();\n *\n * @export\n * @returns {Bounds}\n */\nexport function useWindowBounds(): Bounds {\n  const [bounds, setBounds] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleResize = () =>\n      setBounds({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return bounds;\n}\n\nexport function useInlineSVG(\n  svgString: string,\n  styles = {}\n): () => React.ReactNode {\n  const svgContainerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (svgContainerRef.current) {\n      svgContainerRef.current.innerHTML = svgString;\n    }\n  }, []);\n\n  const render = () => <div style={styles} ref={svgContainerRef} />;\n  return render;\n}\n"],"names":["useDeferredState","duration","initialValue","useState","response","setResponse","innerValue","setInnerValue","useEffect","fn","setTimeout","clearTimeout","useTakeEffect","deps","some","d","undefined","destructor","usePrefetch","assets","load","all","useWindowBounds","width","window","innerWidth","height","innerHeight","bounds","setBounds","handleResize","addEventListener","removeEventListener","useInlineSVG","svgString","styles","svgContainerRef","useRef","current","innerHTML","render","React","style","ref"],"mappings":";;;;;;;;;SAIgBA,iBACdC,UACAC;kBAEgCC,cAAQ,CAAID,YAAJ;MAAjCE;MAAUC;;mBACmBF,cAAQ,CAAID,YAAJ;MAArCI;MAAYC;;AAEnBC,EAAAA,eAAS,CAAC;AACR,QAAMC,EAAE,GAAGC,UAAU,CAAC;AACpBL,MAAAA,WAAW,CAACC,UAAD,CAAX;AACD,KAFoB,EAElBL,QAFkB,CAArB;AAIA,WAAO;AACLU,MAAAA,YAAY,CAACF,EAAD,CAAZ;AACD,KAFD;AAGD,GARQ,EAQN,CAACR,QAAD,EAAWK,UAAX,CARM,CAAT;AAUA,SAAO,CAACF,QAAD,EAAWG,aAAX,CAAP;AACD;SAEeK,cACdH,IACAI;AAEAL,EAAAA,eAAS,CAAC;AACR,QAAIK,IAAI,CAACC,IAAL,CAAU,UAAAC,CAAC;AAAA,aAAIA,CAAC,KAAKC,SAAN,IAAmBD,CAAC,KAAK,IAA7B;AAAA,KAAX,CAAJ,EAAmD;AACnD,QAAME,UAAU,GAAGR,EAAE,EAArB;AACA,WAAO;AACLQ,MAAAA,UAAU,IAAIA,UAAU,EAAxB;AACD,KAFD;AAID,GAPQ,EAONJ,IAPM,CAAT;AAQD;SAMeK,YAAYC;AAC1BX,EAAAA,eAAS,CAAC;AACRY,IAAAA,IAAI,CAACC,GAAL,CAASF,MAAT;AACD,GAFQ,EAEN,CAACA,MAAD,CAFM,CAAT;AAGD;AAOD;;;;;;;SAMgBG;mBACcnB,cAAQ,CAAC;AACnCoB,IAAAA,KAAK,EAAEC,MAAM,CAACC,UADqB;AAEnCC,IAAAA,MAAM,EAAEF,MAAM,CAACG;AAFoB,GAAD;MAA7BC;MAAQC;;AAKfrB,EAAAA,eAAS,CAAC;AACR,QAAMsB,YAAY,GAAG,SAAfA,YAAe;AAAA,aACnBD,SAAS,CAAC;AACRN,QAAAA,KAAK,EAAEC,MAAM,CAACC,UADN;AAERC,QAAAA,MAAM,EAAEF,MAAM,CAACG;AAFP,OAAD,CADU;AAAA,KAArB;;AAKAH,IAAAA,MAAM,CAACO,gBAAP,CAAwB,QAAxB,EAAkCD,YAAlC;AACA,WAAO;AACLN,MAAAA,MAAM,CAACQ,mBAAP,CAA2B,QAA3B,EAAqCF,YAArC;AACD,KAFD;AAGD,GAVQ,EAUN,EAVM,CAAT;AAYA,SAAOF,MAAP;AACD;SAEeK,aACdC,WACAC;MAAAA;AAAAA,IAAAA,SAAS;;;AAET,MAAMC,eAAe,GAAGC,YAAM,CAAiB,IAAjB,CAA9B;AAEA7B,EAAAA,eAAS,CAAC;AACR,QAAI4B,eAAe,CAACE,OAApB,EAA6B;AAC3BF,MAAAA,eAAe,CAACE,OAAhB,CAAwBC,SAAxB,GAAoCL,SAApC;AACD;AACF,GAJQ,EAIN,EAJM,CAAT;;AAMA,MAAMM,MAAM,GAAG,SAATA,MAAS;AAAA,WAAMC,mBAAA,MAAA;AAAKC,MAAAA,KAAK,EAAEP;AAAQQ,MAAAA,GAAG,EAAEP;KAAzB,CAAN;AAAA,GAAf;;AACA,SAAOI,MAAP;AACD;;;;;;;;"}